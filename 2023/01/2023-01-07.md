# µPython access to bytes in RAM

To do anything non-trivial needs DMA, which is work in progress, but had a quick moment at accessing RAM from µPython and turns out to be pretty easy...

```python
from uctypes import addressof
from machine import mem16
from array import array

# initialise array
scratch = array("H", [0xffff for _ in range(1024)])

# grab address and overwrite
address = addressof(scratch)

for j in range(0, 2048, 2):
    mem16[address + j] = j // 2

for j, s in enumerate(scratch):
    assert j == s
```

Useful if you are driving stuff from e.g. ADC to DMA by writing the right registers... driving the ADC for one shot is at least relatively simple:

```python
from machine import mem32

# prepare the pin (set the function to NULL which is 0b11111, needed for ADC)
IO_BANK_BASE = 0x40014000
GPIO26_CTRL = IO_BANK_BASE + 0xD4
mem32[GPIO26_CTRL] = 0b11111

# configure the ADC inc. FIFO - registers
ADC_BASE = 0x4004C000
ADC_CS = ADC_BASE + 0x0
ADC_RESULT = ADC_BASE + 0x4

# trigger ADC for one read
mem32[ADC_CS] = 0x4 + 0x1

# read value
result = mem32[ADC_RESULT]

# report the value remembering that the range is 12 but not 16
print(result)
```

[Previous](./2023-01-06.md)
